# 주식 거래 API 자동화 프로그램

이 프로젝트는 한국투자증권의 API를 사용하여 주식의 현재가를 조회하고, 매수 및 매도를 자동화하는 Python 프로그램입니다. 환경 설정 파일을 통해 필요한 API 키와 인증 정보를 관리하고, 주요 기능을 제공하는 모듈을 통해 거래 요청을 처리합니다.

## 주요 기능

- **액세스 토큰 관리**: API 호출에 필요한 액세스 토큰을 생성, 저장, 불러오기 및 유효성 검사를 수행합니다.
- **주식 데이터 조회**: 특정 종목의 현재가와 거래량을 조회합니다.
- **주식 매수/매도**: API를 이용해 주식을 매수 및 매도합니다.
- **계좌 잔액 조회**: 계좌의 잔액과 보유 주식의 평가 금액을 조회하여 리포트합니다.
- **로그 관리**: 거래 및 조회 작업을 로깅하여 프로그램 사용 기록을 관리합니다.

## 파일 설명

### 1. `mainrun.py`
- 프로그램의 메인 실행 파일로, `get_access_token`을 통해 액세스 토큰을 가져오고, 주식 가격 조회, 매수/매도 요청을 수행합니다.
- 반복 실행을 통해 주기적으로 계좌 정보를 조회할 수 있습니다.

### 2. `requirements.txt`
- 프로젝트에 필요한 Python 패키지 목록입니다.
- `requests`, `pandas`, `keyring`, `colorlog` 등이 포함됩니다.

### 3. `config.py`
- API URL, 헤더 정보, 경로 등의 설정을 관리합니다.
- API 호출 시 필요한 여러 정보들을 정적 메서드로 제공합니다.

### 4. `Logger.py`
- `LogManager` 클래스를 정의하여 로그 관리 기능을 제공합니다.
- 로그 파일을 지정된 위치에 저장하며, 콘솔에 컬러 출력도 지원합니다.

### 5. `access_token.py`
- `AccessTokenManager` 클래스가 포함되어 있으며, API 호출에 필요한 액세스 토큰을 관리합니다.
- 액세스 토큰의 저장, 불러오기, 유효성 검사 기능을 포함합니다.

### 6. `app_key.py`
- `KeyringManager` 클래스를 통해 API 키 및 시크릿 키를 관리합니다.
- `.env` 파일에서 키를 불러오고, 필요 시 `keyring` 라이브러리를 사용해 안전하게 저장합니다.

### 7. `get_account_balance.py`
- 주식 API를 호출해 계좌 잔액 및 보유 주식 정보를 조회하는 함수가 포함되어 있습니다.
- API 응답을 처리하여 계좌 정보를 리포트 형태로 반환합니다.

### 8. `get_price.py`
- `get_current_price_volume` 함수를 통해 특정 종목의 현재가와 거래량을 조회합니다.

### 9. `buy_stock.py` / `sell_stock.py`
- `buy_stock` 및 `sell_stock` 함수가 각각 매수와 매도를 처리하며, 필요한 데이터는 Config 설정을 통해 불러옵니다.

### 10. `hash.py` / `hashkey.py`
- 데이터 보안 강화를 위해 `hashkey` 함수를 통해 요청 데이터의 해시키를 생성합니다.

### 11. `load_env.py`
- 환경 변수 파일을 로드하여 API 키와 시크릿 키를 설정합니다.

### 12. `account_info.py` / `account_formatter.py`
- `DataParser`와 `AccountFormatter` 클래스를 통해 계좌 및 주식 정보를 파싱하고, 형식화하여 출력합니다.

### 13. `__init__.py`
- 각 모듈의 주요 클래스 및 함수들을 외부에서 접근할 수 있도록 내보냅니다.

## 설치 및 실행 방법

1. **패키지 설치**
   ```bash
   pip install -r requirements.txt
   ```

## 환경 변수 설정

`Appkey.env` 파일에 API 키와 시크릿 키를 추가합니다.

파일 내용 예시:
```makefile
APP_KEY=YOUR_APP_KEY
APP_SECRET_KEY=YOUR_APP_SECRET
```

## 프로그램 실행

메인 파일 실행:
```bash
python mainrun.py
```

## 주의사항

- 이 프로젝트는 모의투자를 위한 API 사용 예제입니다. 실제 주식 거래 계좌와 연결된 경우 실거래에 주의하세요.
- 프로그램의 로그 및 토큰 관리는 설정에 따라 달라질 수 있으며, 민감한 정보를 보관하는 파일들은 `.gitignore`에 추가하는 것이 좋습니다.

## 기여 방법

1. 이 프로젝트를 포크합니다.
2. 새로운 기능을 추가하거나 버그를 수정합니다.
3. 변경 사항을 커밋하고, 포크한 저장소에 푸시합니다.
4. Pull Request를 생성하여 변경 사항을 반영 요청합니다.

## 라이선스

MIT 라이선스를 따릅니다. 자세한 사항은 `LICENSE` 파일을 참고하세요.
